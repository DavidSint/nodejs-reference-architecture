<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Databases | Node.JS Reference Architecture</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://nodeshift.dev/nodejs-reference-architecture/functional-components/databases"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Databases | Node.JS Reference Architecture"><meta data-react-helmet="true" name="description" content="We&#x27;ll not recommend which database to use but instead share"><meta data-react-helmet="true" property="og:description" content="We&#x27;ll not recommend which database to use but instead share"><link data-react-helmet="true" rel="shortcut icon" href="/nodejs-reference-architecture/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://nodeshift.dev/nodejs-reference-architecture/functional-components/databases"><link data-react-helmet="true" rel="alternate" href="https://nodeshift.dev/nodejs-reference-architecture/functional-components/databases" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://nodeshift.dev/nodejs-reference-architecture/functional-components/databases" hreflang="x-default"><link rel="stylesheet" href="/nodejs-reference-architecture/assets/css/styles.c2e2bee9.css">
<link rel="preload" href="/nodejs-reference-architecture/assets/js/runtime~main.9cc5b128.js" as="script">
<link rel="preload" href="/nodejs-reference-architecture/assets/js/main.c02ea32e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/nodejs-reference-architecture/"></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/nodejs-reference-architecture/">Node.js Reference Architecture</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#">Development</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/development/building-good-containers">Building Good Containers</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/development/code-consistency">Code Consistency</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/development/npm-proxy">Npm Proxy / Internal Registry</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/development/npm-publishing">Npm Publishing Guidelines</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/development/testing">Testing</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/development/apifirst">API First</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/development/typescript">Typescript</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Functional components</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/functional-components/auth">Authentication</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/functional-components/data-caching">Data Caching</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/nodejs-reference-architecture/functional-components/databases">Databases</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/functional-components/graphql">GraphQL Development</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/functional-components/internationalization">Internationalization</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/functional-components/message-queuing">Message Queuing</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/functional-components/nodejs-versions-images">Node.js Versions and Container Images</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/functional-components/scaling-multi-threading">Scaling and Multi-threading</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/functional-components/static-assets">Static assets</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/functional-components/template-engines">Template Engines (Server Side)</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/functional-components/webframework">Web Framework</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#">Operations</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/operations/distributed-tracing">Distributed Tracing</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/operations/failurehandling">Fault Tolerance</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/operations/healthchecks">Health Checks</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/operations/logging">Logging</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/operations/metrics">Metrics</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Databases</h1></header><p>We&#x27;ll not recommend which database to use but instead share
our experience with the Node.js clients used to connect
to whichever database your project/organization has chosen.</p><p>In most cases there is only a single client with widespread
usage, often provided by the project or organizations which
builds the database itself.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="recommended-packages"></a>Recommended packages<a class="hash-link" href="#recommended-packages" title="Direct link to heading">#</a></h2><p>Members of the team have had success using the following
clients:</p><table><thead><tr><th>Server</th><th>Recommended client</th></tr></thead><tbody><tr><td>Cloudant</td><td><a href="https://www.npm.js.com/package/@ibm-cloud/cloudant" target="_blank" rel="noopener noreferrer">@ibm-cloud/cloudant</a></td></tr><tr><td>CouchDB</td><td><a href="https://www.npmjs.com/package/nano" target="_blank" rel="noopener noreferrer">nano</a></td></tr><tr><td>Elasticsearch</td><td><a href="https://www.npmjs.com/package/@elastic/elasticsearch" target="_blank" rel="noopener noreferrer">@elastic/elasticsearch</a></td></tr><tr><td>Generic SQL</td><td><a href="https://www.npmjs.com/package/odbc" target="_blank" rel="noopener noreferrer">odbc</a></td></tr><tr><td>IBM Db2</td><td><a href="https://www.npmjs.com/package/ibm_db" target="_blank" rel="noopener noreferrer">ibm_db</a>, <a href="https://www.npmjs.com/package/odbc" target="_blank" rel="noopener noreferrer">odbc</a></td></tr><tr><td>Mongo</td><td><a href="https://www.npmjs.com/package/mongodb" target="_blank" rel="noopener noreferrer">mongodb</a></td></tr><tr><td>Postgress</td><td><a href="https://www.npmjs.com/package/pg" target="_blank" rel="noopener noreferrer">pg</a></td></tr><tr><td>Redis</td><td><a href="https://www.npmjs.com/package/ioredis" target="_blank" rel="noopener noreferrer">ioredis</a></td></tr></tbody></table><p>There are popular databases for which there are
no recommendations. However, if the team did not
have some experience with the Node.js client we&#x27;ve not
included it in the list.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="general-guidance"></a>General Guidance<a class="hash-link" href="#general-guidance" title="Direct link to heading">#</a></h3><ul><li><p>Many clients support connection pooling. When available use
pooling to avoid creating a new connection for each request.</p></li><li><p>By default many clients will return all results for a query
unless you take steps to limit the result size. Unless you are
sure the result set will always be a manageable size use
avaliable options to return only a subset of results at a time.</p></li><li><p>Some of the the clients require a native database binding
to be installed. This may limit the platforms on which
you can run the client. Some may also support both
pure JavaScript and native bindings. In those cases
pure JavaScript will be easier to install but the
native binding may provide better performance.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="postgress"></a>Postgress<a class="hash-link" href="#postgress" title="Direct link to heading">#</a></h2><p>Recommendation is to use <a href="https://www.npmjs.com/package/pg" target="_blank" rel="noopener noreferrer">pg</a> as the most
widely used (if not only) client.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="mongo"></a>Mongo<a class="hash-link" href="#mongo" title="Direct link to heading">#</a></h2><p>Recommendation is to use <a href="https://www.npmjs.com/package/mongodb" target="_blank" rel="noopener noreferrer">mongodb</a> which is the
official MongoDB driver provided by the Mongo
project.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="redis"></a>Redis<a class="hash-link" href="#redis" title="Direct link to heading">#</a></h2><p>Recommendation is to use <a href="https://www.npmjs.com/package/ioredis" target="_blank" rel="noopener noreferrer">ioredis</a>.
There are 2 good options with no clear technical winner, but IBM has experience
in production with <a href="https://www.npmjs.com/package/ioredis" target="_blank" rel="noopener noreferrer">ioredis</a> so that is why it is recommended over <a href="https://www.npmjs.com/package/redis" target="_blank" rel="noopener noreferrer">redis</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="guidance"></a>Guidance<a class="hash-link" href="#guidance" title="Direct link to heading">#</a></h3><p>If you are already using redis for messaging this can provide a low cost option
but does not support more advanced features like High Availability.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="cloudant"></a>Cloudant<a class="hash-link" href="#cloudant" title="Direct link to heading">#</a></h2><p>Current versions of cloundant require a cloudant specific client
which is [cloudant-node-sdk][]. While it is version 0.0.16 as when
this section was last updated, it is a fork of the <a href="https://www.npmjs.com/package/nano" target="_blank" rel="noopener noreferrer">nano</a> CouchDB
client which has a long history. This client can also be used
to access CouchDB instances if you are using both Cloudant and
CouchDB.</p><p>If you are using classic Cloudant instances then you can use the clients
recommended for CouchDB</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="ibm-db2"></a>IBM Db2<a class="hash-link" href="#ibm-db2" title="Direct link to heading">#</a></h2><p>On databases except for Db2 for i the recommendation is to
use <a href="https://www.npmjs.com/package/ibm_db" target="_blank" rel="noopener noreferrer">ibm_db</a> which is the official driver provided by IBM.</p><p>For the Db2 for i database the primary recommendation is to
use <a href="https://www.npmjs.com/package/odbc" target="_blank" rel="noopener noreferrer">odbc</a> which is maintained by IBM and allows you to
do local development and then deploy your application
to the IBM i platform. If you are doing both development and
depolyment on IBM i then using <a href="https://www.npmjs.com/package/idb-connector" target="_blank" rel="noopener noreferrer">idb-connector</a>, <a href="https://www.npmjs.com/package/idb-pconnector" target="_blank" rel="noopener noreferrer">idb-pconnector</a>
are good alternatives which require no configuration
or additional installation.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="guidance-1"></a>Guidance<a class="hash-link" href="#guidance-1" title="Direct link to heading">#</a></h3><ul><li>On IBM i clients can inherit authentication based on the Operating
system user. In these cases ensure you run the Node.js program
using the client as non-admin user.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="elasticsearch"></a>Elasticsearch<a class="hash-link" href="#elasticsearch" title="Direct link to heading">#</a></h2><p>Recommendation is to use <a href="https://www.npmjs.com/package/@elastic/elasticsearch" target="_blank" rel="noopener noreferrer">@elastic/elasticsearch</a> which is the
official driver provided by Elastic. Note that this client is replacing
the original client provided by Elastic which is being deprecated.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="couchdb"></a>CouchDB<a class="hash-link" href="#couchdb" title="Direct link to heading">#</a></h2><p>The primary recommendation is to use <a href="https://www.npmjs.com/package/nano" target="_blank" rel="noopener noreferrer">nano</a> which
is the official Apache CouchDB client.</p><p>A secondary recommendation is <a href="https://www.npmjs.com/package/pouchdb" target="_blank" rel="noopener noreferrer">pouchdb</a> which makes it easy to
have a local copy which is kept in sync and is great for unit testing.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="generic-sql"></a>Generic SQL<a class="hash-link" href="#generic-sql" title="Direct link to heading">#</a></h2><p>If there is no database specific client or you want your code to be database
agnostic the <a href="https://www.npmjs.com/package/odbc" target="_blank" rel="noopener noreferrer">odbc</a> client is a good choice. It&#x27;s currently maintained by
IBM team and is the recommended client for access to the IBM i database.</p><p>This client should work for any database for which there is an
<a href="https://github.com/microsoft/ODBC-Specification/blob/master/ODBC%204.0.md" target="_blank" rel="noopener noreferrer">odbc</a>
compliant driver.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="guidance-2"></a>Guidance<a class="hash-link" href="#guidance-2" title="Direct link to heading">#</a></h3><p>Use the built in odbc connection pooling support to avoid creating/destroying
a connecttion for each request.</p><p>Use the odbc built in functions for:</p><ul><li>isolation/commit</li><li>transaction support</li></ul><p>instead of the SQL equivalents.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/nodeshift/nodejs-reference-architecture/docs/functional-components/databases.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/nodejs-reference-architecture/functional-components/data-caching"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Data Caching</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/nodejs-reference-architecture/functional-components/graphql"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">GraphQL Development Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#recommended-packages" class="table-of-contents__link">Recommended packages</a><ul><li><a href="#general-guidance" class="table-of-contents__link">General Guidance</a></li></ul></li><li><a href="#postgress" class="table-of-contents__link">Postgress</a></li><li><a href="#mongo" class="table-of-contents__link">Mongo</a></li><li><a href="#redis" class="table-of-contents__link">Redis</a><ul><li><a href="#guidance" class="table-of-contents__link">Guidance</a></li></ul></li><li><a href="#cloudant" class="table-of-contents__link">Cloudant</a></li><li><a href="#ibm-db2" class="table-of-contents__link">IBM Db2</a><ul><li><a href="#guidance-1" class="table-of-contents__link">Guidance</a></li></ul></li><li><a href="#elasticsearch" class="table-of-contents__link">Elasticsearch</a></li><li><a href="#couchdb" class="table-of-contents__link">CouchDB</a></li><li><a href="#generic-sql" class="table-of-contents__link">Generic SQL</a><ul><li><a href="#guidance-2" class="table-of-contents__link">Guidance</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/nodejs-reference-architecture/assets/js/runtime~main.9cc5b128.js"></script>
<script src="/nodejs-reference-architecture/assets/js/main.c02ea32e.js"></script>
</body>
</html>