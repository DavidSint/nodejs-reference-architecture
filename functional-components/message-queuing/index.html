<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Message Queuing | Node.JS Reference Architecture</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://nodeshift.dev/nodejs-reference-architecture/functional-components/message-queuing"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Message Queuing | Node.JS Reference Architecture"><meta data-react-helmet="true" name="description" content="Recommended packages"><meta data-react-helmet="true" property="og:description" content="Recommended packages"><link data-react-helmet="true" rel="shortcut icon" href="/nodejs-reference-architecture/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://nodeshift.dev/nodejs-reference-architecture/functional-components/message-queuing"><link data-react-helmet="true" rel="alternate" href="https://nodeshift.dev/nodejs-reference-architecture/functional-components/message-queuing" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://nodeshift.dev/nodejs-reference-architecture/functional-components/message-queuing" hreflang="x-default"><link rel="stylesheet" href="/nodejs-reference-architecture/assets/css/styles.c2e2bee9.css">
<link rel="preload" href="/nodejs-reference-architecture/assets/js/runtime~main.509bdb81.js" as="script">
<link rel="preload" href="/nodejs-reference-architecture/assets/js/main.8ac72c68.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/nodejs-reference-architecture/"></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/nodejs-reference-architecture/">Node.js Reference Architecture</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#">Development</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/development/building-good-containers">Building Good Containers</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/development/code-consistency">Code Consistency</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/development/npm-proxy">Npm Proxy / Internal Registry</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/development/npm-publishing">Npm Publishing Guidelines</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/development/testing">Testing</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/development/typescript">Typescript</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/development/code-coverage">Code Coverage</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Functional components</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/functional-components/apifirst">REST APIs Development</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/functional-components/auth">Authentication</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/functional-components/data-caching">Data Caching</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/functional-components/databases">Databases</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/functional-components/graphql">GraphQL Development</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/functional-components/internationalization">Internationalization</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/nodejs-reference-architecture/functional-components/message-queuing">Message Queuing</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/functional-components/nodejs-versions-images">Node.js Versions and Container Images</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/functional-components/scaling-multi-threading">Scaling and Multi-threading</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/functional-components/static-assets">Static assets</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/functional-components/template-engines">Template Engines (Server Side)</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/functional-components/webframework">Web Framework</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#">Operations</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/operations/distributed-tracing">Distributed Tracing</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/operations/failurehandling">Fault Tolerance</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/operations/healthchecks">Health Checks</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/operations/logging">Logging</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs-reference-architecture/operations/metrics">Metrics</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Message Queuing</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="recommended-packages"></a>Recommended packages<a class="hash-link" href="#recommended-packages" title="Direct link to heading">#</a></h2><table><thead><tr><th>Server</th><th>Recommended client</th></tr></thead><tbody><tr><td>Kafka</td><td><a href="https://www.npmjs.com/package/node-rdkafka" target="_blank" rel="noopener noreferrer">node-rdkafka</a></td></tr><tr><td>Kafka</td><td><a href="https://github.com/tulios/kafkajs" target="_blank" rel="noopener noreferrer">KafkaJS</a></td></tr><tr><td>ActiveMQ</td><td><a href="https://www.npmjs.com/package/rhea" target="_blank" rel="noopener noreferrer">rhea</a></td></tr><tr><td>Redis</td><td><a href="https://www.npmjs.com/package/ioredis" target="_blank" rel="noopener noreferrer">ioredis</a></td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="kafka"></a>Kafka<a class="hash-link" href="#kafka" title="Direct link to heading">#</a></h2><p>It&#x27;s currently difficult to make a single recommendation for a Node.js
Kafka client.</p><p>The team currently has the most real-world experience with
<a href="https://www.npmjs.com/package/node-rdkafka" target="_blank" rel="noopener noreferrer">node-rdkafka</a>. In the past it has been widely used and
recommended by the messaging groups within the <code>teams</code>
organizations for performance, features, and protocol compatibility.
One of it&#x27;s strengths is that is based on the same
<a href="https://github.com/edenhill/librdkafka" target="_blank" rel="noopener noreferrer">librdkafka</a>, maintained
by the Kafka project and used by most language clients. <strong>However</strong>
it is in the midst of a maintenance challenge that it does not
seem to be pulling out of (for example at the time this was written
node-rdkafka does not build on Node.js version 16).</p><p><a href="https://github.com/tulios/kafkajs" target="_blank" rel="noopener noreferrer">KafkaJS</a> is a newer Node.js
Kafka client which is more actively maintained and is growing in
popularity. It&#x27;s pure JavaScript implementation makes it
easier to install and use. While we don&#x27;t have past history of real-world
experience with the KafkaJS client, we have reviewed the features
and usage versus node-rdkafka and it compares favorably. The one
potential caveat is with respect to performance where node-rdkafka, likely
due to its use of <a href="https://github.com/edenhill/librdkafka" target="_blank" rel="noopener noreferrer">librdkafka</a>,
comes out ahead. While the difference a simple benchmark is quite
significant, whether that matters for a real-world application will
depend on the application.</p><p>At this point our recommendation is:</p><ul><li>if you need the highest possible performance or longest track record of production use and are
using an older version of Node.js (14.x or earlier) and can tolerate
the risk on the maintenance side <a href="https://www.npmjs.com/package/node-rdkafka" target="_blank" rel="noopener noreferrer">node-rdkafka</a> may still be
your best choice.</li><li>otherwise you should consider <a href="https://github.com/tulios/kafkajs" target="_blank" rel="noopener noreferrer">KafkaJS</a>. If your application
has high performance requirements you should plan to validate
that you can meet those requirements with KafkaJS early on in your
development lifecycle.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="guidance"></a>Guidance<a class="hash-link" href="#guidance" title="Direct link to heading">#</a></h3><p>Reuse connections. Do not write apps that connect/send/disconnect
repeatedly in a loop. This will result in poor performance, not only for the
individual application, but will also impact the Kafka cluster for other users.</p><p>Architect applications so that they connect and keep
an open connection on which events are processed when they arrive.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="activemq"></a>ActiveMQ<a class="hash-link" href="#activemq" title="Direct link to heading">#</a></h2><p>Recommendation is to use <a href="https://www.npmjs.com/package/rhea" target="_blank" rel="noopener noreferrer">rhea</a> which supports AMQP1.0
(one of the protocols supported by ActiveQ). This module is maintained by Red Hat and has
higher weekly downloads than the competing module for ActiveMQ which supports the STOMP
protocol (the native ActiveMQ protocol).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="guidance-1"></a>Guidance<a class="hash-link" href="#guidance-1" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="redis"></a>Redis<a class="hash-link" href="#redis" title="Direct link to heading">#</a></h2><p>Recommendation is to use <a href="https://www.npmjs.com/package/ioredis" target="_blank" rel="noopener noreferrer">ioredis</a>.
There are 2 good options with no clear technical winner, but IBM has experience
in production with <a href="https://www.npmjs.com/package/ioredis" target="_blank" rel="noopener noreferrer">ioredis</a> so that is why it is recommended over <a href="https://www.npmjs.com/package/redis" target="_blank" rel="noopener noreferrer">redis</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="guidance-2"></a>Guidance<a class="hash-link" href="#guidance-2" title="Direct link to heading">#</a></h3><p>If you are already using redis for messaging this can provide a low cost option
but does not support more advanced features like High Availability. For more
sophisticated uses cases you should consider a more complete option like Kafka.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/nodeshift/nodejs-reference-architecture/docs/functional-components/message-queuing.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/nodejs-reference-architecture/functional-components/internationalization"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Internationalization</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/nodejs-reference-architecture/functional-components/nodejs-versions-images"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Node.js Versions and Container Images Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#recommended-packages" class="table-of-contents__link">Recommended packages</a></li><li><a href="#kafka" class="table-of-contents__link">Kafka</a><ul><li><a href="#guidance" class="table-of-contents__link">Guidance</a></li></ul></li><li><a href="#activemq" class="table-of-contents__link">ActiveMQ</a><ul><li><a href="#guidance-1" class="table-of-contents__link">Guidance</a></li></ul></li><li><a href="#redis" class="table-of-contents__link">Redis</a><ul><li><a href="#guidance-2" class="table-of-contents__link">Guidance</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/nodejs-reference-architecture/assets/js/runtime~main.509bdb81.js"></script>
<script src="/nodejs-reference-architecture/assets/js/main.8ac72c68.js"></script>
</body>
</html>