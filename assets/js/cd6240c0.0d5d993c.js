"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8050],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return h}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),l=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=l(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),u=l(n),h=r,m=u["".concat(s,".").concat(h)]||u[h]||p[h]||i;return n?a.createElement(m,o(o({ref:t},d),{},{components:n})):a.createElement(m,o({ref:t},d))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=u;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,o[1]=c;for(var l=2;l<i;l++)o[l]=n[l];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},6284:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return c},contentTitle:function(){return s},metadata:function(){return l},toc:function(){return d},default:function(){return u}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),o=["components"],c={sidebar_position:4},s="Databases",l={unversionedId:"docs/functional-components/databases",id:"docs/functional-components/databases",isDocsHomePage:!1,title:"Databases",description:"We'll not recommend which database to use but instead share",source:"@site/docs/docs/functional-components/databases.md",sourceDirName:"docs/functional-components",slug:"/docs/functional-components/databases",permalink:"/nodejs-reference-architecture/docs/functional-components/databases",editUrl:"https://github.com/nodeshift/nodejs-reference-architecture/docs/docs/functional-components/databases.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Data Caching",permalink:"/nodejs-reference-architecture/docs/functional-components/data-caching"},next:{title:"GraphQL Development",permalink:"/nodejs-reference-architecture/docs/functional-components/graphql"}},d=[{value:"Recommended packages",id:"recommended-packages",children:[{value:"General Guidance",id:"general-guidance",children:[]}]},{value:"Postgress",id:"postgress",children:[]},{value:"Mongo",id:"mongo",children:[]},{value:"Redis",id:"redis",children:[{value:"Guidance",id:"guidance",children:[]}]},{value:"Cloudant",id:"cloudant",children:[]},{value:"IBM Db2",id:"ibm-db2",children:[{value:"Guidance",id:"guidance-1",children:[]}]},{value:"Elasticsearch",id:"elasticsearch",children:[]},{value:"CouchDB",id:"couchdb",children:[]},{value:"Generic SQL",id:"generic-sql",children:[{value:"Guidance",id:"guidance-2",children:[]}]}],p={toc:d};function u(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"databases"},"Databases"),(0,i.kt)("p",null,"We'll not recommend which database to use but instead share\nour experience with the Node.js clients used to connect\nto whichever database your project/organization has chosen."),(0,i.kt)("p",null,"In most cases there is only a single client with widespread\nusage, often provided by the project or organizations which\nbuilds the database itself."),(0,i.kt)("h2",{id:"recommended-packages"},"Recommended packages"),(0,i.kt)("p",null,"Members of the team have had success using the following\nclients:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Server"),(0,i.kt)("th",{parentName:"tr",align:null},"Recommended client"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Cloudant"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://www.npm.js.com/package/@ibm-cloud/cloudant"},"@ibm-cloud/cloudant"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"CouchDB"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://www.npmjs.com/package/nano"},"nano"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Elasticsearch"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://www.npmjs.com/package/@elastic/elasticsearch"},"@elastic/elasticsearch"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Generic SQL"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://www.npmjs.com/package/odbc"},"odbc"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"IBM Db2"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://www.npmjs.com/package/ibm_db"},"ibm_db"),", ",(0,i.kt)("a",{parentName:"td",href:"https://www.npmjs.com/package/odbc"},"odbc"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Mongo"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://www.npmjs.com/package/mongodb"},"mongodb"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Postgress"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://www.npmjs.com/package/pg"},"pg"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Redis"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://www.npmjs.com/package/ioredis"},"ioredis"))))),(0,i.kt)("p",null,"There are popular databases for which there are\nno recommendations. However, if the team did not\nhave some experience with the Node.js client we've not\nincluded it in the list."),(0,i.kt)("h3",{id:"general-guidance"},"General Guidance"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Many clients support connection pooling. When available use\npooling to avoid creating a new connection for each request.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"By default many clients will return all results for a query\nunless you take steps to limit the result size. Unless you are\nsure the result set will always be a manageable size use\navaliable options to return only a subset of results at a time.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Some of the the clients require a native database binding\nto be installed. This may limit the platforms on which\nyou can run the client. Some may also support both\npure JavaScript and native bindings. In those cases\npure JavaScript will be easier to install but the\nnative binding may provide better performance."))),(0,i.kt)("h2",{id:"postgress"},"Postgress"),(0,i.kt)("p",null,"Recommendation is to use ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/pg"},"pg")," as the most\nwidely used (if not only) client."),(0,i.kt)("h2",{id:"mongo"},"Mongo"),(0,i.kt)("p",null,"Recommendation is to use ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/mongodb"},"mongodb")," which is the\nofficial MongoDB driver provided by the Mongo\nproject."),(0,i.kt)("h2",{id:"redis"},"Redis"),(0,i.kt)("p",null,"Recommendation is to use ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/ioredis"},"ioredis"),".\nThere are 2 good options with no clear technical winner, but IBM has experience\nin production with ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/ioredis"},"ioredis")," so that is why it is recommended over ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/redis"},"redis"),"."),(0,i.kt)("h3",{id:"guidance"},"Guidance"),(0,i.kt)("p",null,"If you are already using redis for messaging this can provide a low cost option\nbut does not support more advanced features like High Availability."),(0,i.kt)("h2",{id:"cloudant"},"Cloudant"),(0,i.kt)("p",null,"Current versions of cloundant require a cloudant specific client\nwhich is ","[cloudant-node-sdk][]",". While it is version 0.0.16 as when\nthis section was last updated, it is a fork of the ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/nano"},"nano")," CouchDB\nclient which has a long history. This client can also be used\nto access CouchDB instances if you are using both Cloudant and\nCouchDB."),(0,i.kt)("p",null,"If you are using classic Cloudant instances then you can use the clients\nrecommended for CouchDB"),(0,i.kt)("h2",{id:"ibm-db2"},"IBM Db2"),(0,i.kt)("p",null,"On databases except for Db2 for i the recommendation is to\nuse ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/ibm_db"},"ibm_db")," which is the official driver provided by IBM."),(0,i.kt)("p",null,"For the Db2 for i database the primary recommendation is to\nuse ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/odbc"},"odbc")," which is maintained by IBM and allows you to\ndo local development and then deploy your application\nto the IBM i platform. If you are doing both development and\ndepolyment on IBM i then using ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/idb-connector"},"idb-connector"),", ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/idb-pconnector"},"idb-pconnector"),"\nare good alternatives which require no configuration\nor additional installation."),(0,i.kt)("h3",{id:"guidance-1"},"Guidance"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"On IBM i clients can inherit authentication based on the Operating\nsystem user. In these cases ensure you run the Node.js program\nusing the client as non-admin user.")),(0,i.kt)("h2",{id:"elasticsearch"},"Elasticsearch"),(0,i.kt)("p",null,"Recommendation is to use ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@elastic/elasticsearch"},"@elastic/elasticsearch")," which is the\nofficial driver provided by Elastic. Note that this client is replacing\nthe original client provided by Elastic which is being deprecated."),(0,i.kt)("h2",{id:"couchdb"},"CouchDB"),(0,i.kt)("p",null,"The primary recommendation is to use ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/nano"},"nano")," which\nis the official Apache CouchDB client."),(0,i.kt)("p",null,"A secondary recommendation is ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/pouchdb"},"pouchdb")," which makes it easy to\nhave a local copy which is kept in sync and is great for unit testing."),(0,i.kt)("h2",{id:"generic-sql"},"Generic SQL"),(0,i.kt)("p",null,"If there is no database specific client or you want your code to be database\nagnostic the ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/odbc"},"odbc")," client is a good choice. It's currently maintained by\nIBM team and is the recommended client for access to the IBM i database."),(0,i.kt)("p",null,"This client should work for any database for which there is an\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/microsoft/ODBC-Specification/blob/master/ODBC%204.0.md"},"odbc"),"\ncompliant driver."),(0,i.kt)("h3",{id:"guidance-2"},"Guidance"),(0,i.kt)("p",null,"Use the built in odbc connection pooling support to avoid creating/destroying\na connecttion for each request."),(0,i.kt)("p",null,"Use the odbc built in functions for:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"isolation/commit"),(0,i.kt)("li",{parentName:"ul"},"transaction support")),(0,i.kt)("p",null,"instead of the SQL equivalents."))}u.isMDXComponent=!0}}]);